<link rel="import" href="../circle-progress/circle-progress.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-tooltip/paper-tooltip.html">
<link rel="import" href="../neon-animation/web-animations.html">

<dom-module id="lrnsys-progress-circle">
  <template>
    <style>
      :host {
        display: block;
      }
      #button {
        min-width: .1em;
        margin: 0;
        padding: 0;
        display: inline;
      }
      circle-progress {
        margin: 0;
        --circle-progress-width: 20px;
        --circle-progress-height: 20px;
        --circle-progress-stroke-color: var(--paper-progress-container-color, --google-green-500);
        --circle-progress-bg-stroke-color: var(--paper-progress-container-color, --google-grey-300);;
      }
      .disabled {
        background-color: var(--paper-progress-disabled-active-color, var(--google-grey-500));
        --circle-progress-bg-stroke-color: var(--paper-progress-container-color, --google-grey-500);
      }
      .complete {
        background-color: var(--paper-progress-container-color, --google-green-500);
      }
      .available {
        background-color: var(--paper-progress-disabled-active-color, var(--google-grey-300));
      }
    </style>
    <paper-button id="button">
      <circle-progress class$="[[status]]" value="[[value]]" max="[[max]]" stroke-width="[[width]]" angle="170">
      <slot></slot>
    </circle-progress>
    </paper-button>
    <paper-tooltip
      for="button"
      position="bottom"
      offset="0">
      [[label]]
    </paper-tooltip>
  </template>
  <script>
    Polymer({
      is: 'lrnsys-progress-circle',
      listeners: {
        'button.mousedown': 'tapEventOn',
      },
      properties: {
        /**
         * Current value.
         */
        value: {
          type: String,
          value: 0,
          reflectToAttribute: true,
        },
        /**
         * Status of the progression.
         * Possible values are disabled, complete, available
         */
        status: {
          type: String,
          value: 'available',
          reflectToAttribute: true,
          notify: true,
        },
        /**
         * Max progression for doing math against.
         */
        max: {
          type: String,
          reflectToAttribute: true,
        },
        /**
         * Stroke width.
         */
        width: {
          type: Number,
          value: 4,
        },
      },
      tapEventOn: function(e) {
        this.fire('active-node-changed', {node: e});
      },
    });
  </script>
</dom-module>
