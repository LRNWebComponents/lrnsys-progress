<link rel="import" href="imports.html">
<link rel="import" href="./lrnsys-progress-circle.html">
<link rel="import" href="../paper-progress/paper-progress.html">

<!--
`lrnsys-progress`
A LRN element

@demo demo/index.html
-->

<dom-module id="lrnsys-progress">
  <template>
    <style>
      :host {
        display: block;
      }
      #circle-container {
        display: flex;
        justify-content:space-between;
        list-style: none;
        margin: -.9em 0 0 0;
        padding: 0;
      }
      paper-progress {
        width: 100%;
        --paper-progress-transition-duration: 0.5s;
        --paper-progress-transition-timing-function: ease;
        --paper-progress-transition-transition-delay: .25s;
      }
    </style>
    <paper-progress value="[[overallPercentage]]" class="blue"></paper-progress>
    <ul id="circle-container">
      <template is="dom-repeat" items="[[items]]" as="item">
        <li class="circle-node">
          <lrnsys-progress-circle status="[[item.status]]" value="[[item.value]]" max="[[item.max]]" width="3">[[index]]</lrnsys-progress-circle>
        </li>
      </template>
    </ul>

  </template>

  <script>
    Polymer({

      is: 'lrnsys-progress',

      properties: {
        title: {
          type: String,
          value: 'lrnsys-progress',
        },
        items: {
          type: Array,
          value: [
            {
              "title": "Introduction",
              "url": "intro.md",
              "status": "complete",
              "value": 100,
              "max": 100,
            },
            {
              "title": "ELMSLN",
              "url": "about-elmsln.md",
              "status": "available",
              "value": 10,
              "max": 100,
            },
            {
              "title": "Somre more",
              "url": "some-more.md",
              "status": "available",
              "value": 0,
              "max": 100,
            },
            {
              "title": "And then a really long title",
              "url": "page-4.md",
              "status": "disabled",
              "value": 0,
              "max": 100,
            }
          ]
        },
        percentage: {
          type: Number,
          value: 0
        },
        active: {
          type: Number,
          value: 0
        },
        overallPercentage: {
          type: Number,
          computed: '_overallPercentageCompute(items, active)',
          reflectToAttribute: true,
        },
      },
      _overallPercentageCompute: function (items, active) {
        return (active / (items.length-1)) * 100;
      }

    });
  </script>
</dom-module>